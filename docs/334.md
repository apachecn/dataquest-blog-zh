# Python æ•™ç¨‹:ä½¿ç”¨ Scrapy è¿›è¡Œ Web æŠ“å–(8 ä¸ªä»£ç ç¤ºä¾‹)

> åŸæ–‡:[https://www.dataquest.io/blog/web-scraping-with-scrapy/](https://www.dataquest.io/blog/web-scraping-with-scrapy/)

May 24, 2022![](../Images/0c2f507744ab483bb47d640cd91bdfd5.png)

## åœ¨æœ¬ Python æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Scrapy æµè§ˆ web æŠ“å–ï¼Œå¹¶å®Œæˆä¸€ä¸ªç¤ºä¾‹ç”µå­å•†åŠ¡ç½‘ç«™æŠ“å–é¡¹ç›®ã€‚

äº’è”ç½‘ä¸Šæœ‰è¶…è¿‡ 40 å…†å­—èŠ‚çš„æ•°æ®ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå…¶ä¸­å¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯éç»“æ„åŒ–çš„ï¼Œä¸å¯æœºè¯»ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥é€šè¿‡ç½‘ç«™è®¿é—®æ•°æ®ï¼Œä»æŠ€æœ¯ä¸Šè®²ï¼Œæ˜¯ä»¥ HTML é¡µé¢çš„å½¢å¼ã€‚æœ‰æ²¡æœ‰ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•ï¼Œä¸ä»…å¯ä»¥è®¿é—®è¿™äº›ç½‘ç»œæ•°æ®ï¼Œè¿˜å¯ä»¥ä»¥ç»“æ„åŒ–çš„æ ¼å¼ä¸‹è½½è¿™äº›æ•°æ®ï¼Œä½¿å…¶å˜å¾—æœºå™¨å¯è¯»ï¼Œå¹¶éšæ—¶å¯ä»¥è·å¾—è§è§£ï¼Ÿ

è¿™å°±æ˜¯ç½‘é¡µæŠ“å–å’Œ [Scrapy](https://scrapy.org/) å¯ä»¥å¸®åŠ©ä½ çš„åœ°æ–¹ï¼Web æŠ“å–æ˜¯ä»ç½‘ç«™ä¸­æå–ç»“æ„åŒ–æ•°æ®çš„è¿‡ç¨‹ã€‚Scrapy æ˜¯æœ€æµè¡Œçš„ web æŠ“å–æ¡†æ¶ä¹‹ä¸€ï¼Œå¦‚æœä½ æƒ³å­¦ä¹ å¦‚ä½•ä» web ä¸ŠæŠ“å–æ•°æ®ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•å¼€å§‹ä½¿ç”¨ Scrapyï¼Œè¿˜å°†å®ç°ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®æ¥æŠ“å–ä¸€ä¸ªç”µå­å•†åŠ¡ç½‘ç«™ã€‚

æˆ‘ä»¬å¼€å§‹å§ï¼

### å…ˆå†³æ¡ä»¶

è¦å®Œæˆæœ¬æ•™ç¨‹ï¼Œæ‚¨éœ€è¦åœ¨æ‚¨çš„ç³»ç»Ÿä¸Šå®‰è£… Pythonï¼Œå¹¶ä¸”å»ºè®®æ‚¨å…·å¤‡ Python ç¼–ç çš„åŸºç¡€çŸ¥è¯†ã€‚

### å®‰è£…åˆ®åˆ€

ä¸ºäº†ä½¿ç”¨ Scrapyï¼Œä½ éœ€è¦å®‰è£…å®ƒã€‚å¹¸è¿çš„æ˜¯ï¼Œé€šè¿‡ pip æœ‰ä¸€ä¸ªéå¸¸ç®€å•çš„æ–¹æ³•ã€‚å¯ä»¥ç”¨`pip install scrapy`å®‰è£… Scrapyã€‚ä½ ä¹Ÿå¯ä»¥åœ¨[åƒåœ¾æ–‡ä»¶](https://docs.scrapy.org/en/latest/intro/install.html)ä¸­æ‰¾åˆ°å…¶ä»–å®‰è£…é€‰é¡¹ã€‚å»ºè®®åœ¨ Python è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£… Scrapyã€‚

```
virtualenv env
source env/bin/activate
pip install scrapy
```

è¿™ä¸ªä»£ç ç‰‡æ®µåˆ›å»ºä¸€ä¸ªæ–°çš„ Python è™šæ‹Ÿç¯å¢ƒï¼Œæ¿€æ´»å®ƒï¼Œå¹¶å®‰è£… Scrapyã€‚

### æ‚ä¹±çš„é¡¹ç›®ç»“æ„

æ¯å½“ä½ åˆ›å»ºä¸€ä¸ªæ–°çš„ Scrapy é¡¹ç›®ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªç‰¹å®šçš„æ–‡ä»¶ç»“æ„ï¼Œä»¥ç¡®ä¿ Scrapy çŸ¥é“åœ¨å“ªé‡Œå¯»æ‰¾å®ƒçš„æ¯ä¸ªæ¨¡å—ã€‚å¹¸è¿çš„æ˜¯ï¼ŒScrapy æœ‰ä¸€ä¸ªæ–¹ä¾¿çš„å‘½ä»¤ï¼Œå¯ä»¥å¸®åŠ©ä½ ç”¨ Scrapy çš„æ‰€æœ‰æ¨¡å—åˆ›å»ºä¸€ä¸ªç©ºçš„ Scrapy é¡¹ç›®:

```
scrapy startproject bookscraper
```

å¦‚æœæ‚¨è¿è¡Œæ­¤å‘½ä»¤ï¼Œå°†åˆ›å»ºä¸€ä¸ªæ–°çš„åŸºäºæ¨¡æ¿çš„ Scrapy é¡¹ç›®ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
ğŸ“¦bookscraper
 â”£ ğŸ“‚bookscraper
 â”ƒ â”£ ğŸ“‚spiders
 â”ƒ â”ƒ â”— ğŸ“œbookscraper.py
 â”ƒ â”£ ğŸ“œitems.py
 â”ƒ â”£ ğŸ“œmiddlewares.py
 â”ƒ â”£ ğŸ“œpipelines.py
 â”ƒ â”— ğŸ“œsettings.py
 â”— ğŸ“œscrapy.cfg
```

è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ Scrapy é¡¹ç›®æ–‡ä»¶ç»“æ„ã€‚è®©æˆ‘ä»¬å¿«é€Ÿæ£€æŸ¥ä¸€ä¸‹è¿™äº›æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œä»¥ä¾¿æ‚¨ç†è§£æ¯ä¸ªå…ƒç´ çš„ä½œç”¨:

*   æ–‡ä»¶å¤¹:è¿™ä¸ªæ–‡ä»¶å¤¹åŒ…å«äº†æˆ‘ä»¬æœªæ¥æ‰€æœ‰çš„ç”¨äºæå–æ•°æ®çš„ Scrapy spider æ–‡ä»¶ã€‚
*   è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†æ¡ç›®å¯¹è±¡ï¼Œè¡Œä¸ºç±»ä¼¼äº Python å­—å…¸ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªæŠ½è±¡å±‚æ¥å­˜å‚¨ Scrapy æ¡†æ¶ä¸­çš„æ•°æ®ã€‚
*   (é«˜çº§):å¦‚æœä½ æƒ³ä¿®æ”¹ Scrapy è¿è¡Œå’Œå‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚çš„æ–¹å¼(ä¾‹å¦‚ï¼Œç»•è¿‡ antibot è§£å†³æ–¹æ¡ˆ)ï¼ŒScrapy ä¸­é—´ä»¶æ˜¯æœ‰ç”¨çš„ã€‚å¯¹äºç®€å•çš„æŠ“å–é¡¹ç›®ï¼Œä¸éœ€è¦ä¿®æ”¹ä¸­é—´ä»¶ã€‚
*   `pipelines` : Scrapy pipelines æ˜¯åœ¨ä½ æå–æ•°æ®ä¹‹åï¼Œä½ æƒ³è¦å®ç°çš„é¢å¤–çš„æ•°æ®å¤„ç†æ­¥éª¤ã€‚æ‚¨å¯ä»¥æ¸…ç†ã€ç»„ç»‡ç”šè‡³ä¸¢å¼ƒè¿™äº›ç®¡é“ä¸­çš„æ•°æ®ã€‚
*   `settings`:Scrapy å¦‚ä½•è¿è¡Œçš„ä¸€èˆ¬è®¾ç½®ï¼Œä¾‹å¦‚ï¼Œè¯·æ±‚ä¹‹é—´çš„å»¶è¿Ÿã€ç¼“å­˜ã€æ–‡ä»¶ä¸‹è½½è®¾ç½®ç­‰ã€‚

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬é›†ä¸­åœ¨ä¸¤ä¸ª Scrapy æ¨¡å—:èœ˜è››å’Œé¡¹ç›®ã€‚æœ‰äº†è¿™ä¸¤ä¸ªæ¨¡å—ï¼Œæ‚¨å¯ä»¥å®ç°ç®€å•æœ‰æ•ˆçš„ web æŠ“å–å™¨ï¼Œå®ƒå¯ä»¥ä»ä»»ä½•ç½‘ç«™æå–æ•°æ®ã€‚

åœ¨æ‚¨æˆåŠŸå®‰è£…äº† Scrapy å¹¶åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Scrapy é¡¹ç›®ä¹‹åï¼Œè®©æˆ‘ä»¬æ¥å­¦ä¹ å¦‚ä½•ç¼–å†™ä¸€ä¸ª Scrapy spider(ä¹Ÿç§°ä¸º scraper ),ä»ç”µå­å•†åŠ¡å•†åº—ä¸­æå–äº§å“æ•°æ®ã€‚

### æŠ“å–é€»è¾‘

ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œæœ¬æ•™ç¨‹ä½¿ç”¨äº†ä¸€ä¸ªä¸“é—¨ä¸ºç»ƒä¹ ç½‘é¡µæŠ“å–è€Œåˆ›å»ºçš„ç½‘ç«™:[ä¹¦ç±æ¥æŠ“å–](http://books.toscrape.com)ã€‚åœ¨ç¼–å†™èœ˜è››ç¨‹åºä¹‹å‰ï¼Œçœ‹ä¸€ä¸‹ç½‘ç«™å¹¶åˆ†æèœ˜è››è®¿é—®å’ŒæŠ“å–æ•°æ®çš„è·¯å¾„æ˜¯å¾ˆé‡è¦çš„ã€‚

![](../Images/efbace7e35df08d75f36cc1f65039ca8.png)

æˆ‘ä»¬å°†åˆ©ç”¨è¿™ä¸ªç½‘ç«™æ”¶é›†æ‰€æœ‰å¯ç”¨çš„ä¹¦ç±ã€‚æ­£å¦‚ä½ åœ¨ç½‘ç«™ä¸Šçœ‹åˆ°çš„ï¼Œæ¯ä¸ªç±»åˆ«é¡µé¢éƒ½æœ‰å¤šä¸ªç±»åˆ«çš„ä¹¦ç±å’Œå¤šä¸ªé¡¹ç›®ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬çš„ scraper éœ€è¦å»æ¯ä¸ªç±»åˆ«é¡µé¢ï¼Œæ‰“å¼€æ¯æœ¬ä¹¦çš„é¡µé¢ã€‚

ä¸‹é¢æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹åˆ®åˆ€åœ¨ç½‘ç«™ä¸Šéœ€è¦åšçš„äº‹æƒ…:

1.  æ‰“å¼€ç½‘ç«™([http://books.toscrape.com/](http://books.toscrape.com/))ã€‚
2.  æ‰¾åˆ°æ‰€æœ‰çš„åˆ†ç±»ç½‘å€(æ¯”å¦‚[è¿™ä¸ª](http://books.toscrape.com/catalogue/category/books/travel_2/index.html))ã€‚
3.  æ‰¾åˆ°åˆ†ç±»é¡µé¢ä¸Šæ‰€æœ‰ä¹¦ç±çš„ç½‘å€(æ¯”å¦‚[è¿™ä¸ª](http://books.toscrape.com/catalogue/its-only-the-himalayas_981/index.html))ã€‚
4.  é€ä¸ªæ‰“å¼€æ¯ä¸ª URLï¼Œæå–å›¾ä¹¦æ•°æ®ã€‚

åœ¨ Scrapy ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»å°†æŠ“å–çš„æ•°æ®å­˜å‚¨åœ¨`Item`ç±»ä¸­ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œä¸€ä¸ªæ¡ç›®ä¼šæœ‰åƒæ ‡é¢˜ã€é“¾æ¥å’Œå‘å¸ƒæ—¶é—´è¿™æ ·çš„å­—æ®µã€‚è®©æˆ‘ä»¬å®æ–½è¯¥é¡¹ç›®ï¼

### é›¶ç¢ç‰©å“

åˆ›å»ºä¸€ä¸ªæ–°çš„ Scrapy é¡¹ç›®æ¥å­˜å‚¨æŠ“å–çš„æ•°æ®ã€‚è®©æˆ‘ä»¬ç§°è¿™ä¸ªé¡¹ç›®ä¸º`BookItem`å¹¶æ·»åŠ ä»£è¡¨æ¯æœ¬ä¹¦çš„æ•°æ®å­—æ®µ:

*   æ ‡é¢˜
*   ä»·æ ¼
*   é€šç”¨äº§å“ä»£ç 
*   å›¾åƒ _url
*   å…¨çƒèµ„æºå®šä½å™¨(Uniform Resource Locator)

åœ¨ä»£ç ä¸­ï¼Œè¿™æ˜¯å¦‚ä½•åœ¨ Scrapy ä¸­åˆ›å»ºæ–°çš„é¡¹ç›®ç±»:

```
from scrapy import Item, Field
class BookItem(Item):
    title = Field()
    price = Field()
    upc = Field()
    image_url = Field()
    url = Field()
```

åœ¨ä»£ç ç‰‡æ®µä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ‚¨éœ€è¦å¯¼å…¥ä¸¤ä¸ª Scrapy å¯¹è±¡:`Item`å’Œ`Field`ã€‚

`Item`è¢«ç”¨ä½œ`BookItem`çš„çˆ¶ç±»ï¼Œæ‰€ä»¥ Scrapy çŸ¥é“è¿™ä¸ªå¯¹è±¡å°†åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ç”¨æ¥å­˜å‚¨å’Œå¼•ç”¨æŠ“å–çš„æ•°æ®å­—æ®µã€‚

`Field`æ˜¯ä½œä¸ºé¡¹ç›®ç±»çš„ä¸€éƒ¨åˆ†å­˜å‚¨çš„å¯¹è±¡ï¼Œç”¨äºæŒ‡ç¤ºé¡¹ç›®ä¸­çš„æ•°æ®å­—æ®µã€‚

ä¸€æ—¦ä½ åˆ›å»ºäº†`BookItem`ç±»ï¼Œä½ å°±å¯ä»¥ç»§ç»­åœ¨ Scrapy spider ä¸Šå·¥ä½œï¼Œå¤„ç†æŠ“å–é€»è¾‘å’Œæå–ã€‚

### åˆºç—’èœ˜è››

åœ¨åä¸º`bookscraper.py`çš„`spiders`æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ Python æ–‡ä»¶

```
touch bookscraper.py
```

è¿™ä¸ªèœ˜è››æ–‡ä»¶åŒ…å«èœ˜è››é€»è¾‘å’ŒæŠ“å–ä»£ç ã€‚ä¸ºäº†ç¡®å®šè¯¥æ–‡ä»¶ä¸­éœ€è¦åŒ…å«å“ªäº›å†…å®¹ï¼Œè®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹ç½‘ç«™ï¼

### ç½‘ç«™æ£€æŸ¥

ç½‘ç«™æ£€æŸ¥æ˜¯ç½‘é¡µæŠ“å–è¿‡ç¨‹ä¸­ä¸€ä¸ªç¹çä½†é‡è¦çš„æ­¥éª¤ã€‚æ²¡æœ‰é€‚å½“çš„æ£€æŸ¥ï¼Œä½ å°±ä¸çŸ¥é“å¦‚ä½•æœ‰æ•ˆåœ°å®šä½å’Œæå–ç½‘ç«™ä¸Šçš„æ•°æ®ã€‚æ£€æŸ¥é€šå¸¸æ˜¯ä½¿ç”¨æµè§ˆå™¨çš„â€œinspectâ€å·¥å…·æˆ–ä¸€äº›ç¬¬ä¸‰æ–¹æµè§ˆå™¨æ’ä»¶æ¥å®Œæˆçš„ï¼Œè¿™äº›æ’ä»¶å¯ä»¥è®©æ‚¨â€œæ·±å…¥æŸ¥çœ‹â€å¹¶åˆ†æç½‘ç«™çš„æºä»£ç ã€‚å»ºè®®ä½ åœ¨åˆ†æç½‘ç«™çš„æ—¶å€™å…³é—­æµè§ˆå™¨ä¸­çš„ JS æ‰§è¡ŒåŠŸèƒ½â€”â€”è¿™æ ·ä½ å°±å¯ä»¥åƒä½ çš„åˆºç—’èœ˜è››çœ‹åˆ°ç½‘ç«™ä¸€æ ·çœ‹åˆ°ç½‘ç«™ã€‚

è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹æˆ‘ä»¬éœ€è¦åœ¨ç½‘ç«™çš„æºä»£ç ä¸­æ‰¾åˆ°å“ªäº› URL å’Œæ•°æ®å­—æ®µ:

*   ç±»åˆ« URL
*   å›¾ä¹¦ URL
*   æœ€åï¼Œé¢„è®¢æ•°æ®å­—æ®µ

æ£€æŸ¥æºä»£ç ä»¥å®šä½ HTML ä¸­çš„ç±»åˆ« URL:

![](../Images/79793bd45535218dd67712920d5ca066.png)

é€šè¿‡æ£€æŸ¥ç½‘ç«™ï¼Œæ‚¨å¯ä»¥æ³¨æ„åˆ°ç±»åˆ« URL å­˜å‚¨åœ¨ä¸€ä¸ªå¸¦æœ‰ç±»`nav nav-list`çš„`ul` HTML å…ƒç´ ä¸­ã€‚è¿™æ˜¯è‡³å…³é‡è¦çš„ä¿¡æ¯ï¼Œå› ä¸ºæ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ª CSS å’Œå‘¨å›´çš„ HTML å…ƒç´ æ¥å®šä½é¡µé¢ä¸Šçš„æ‰€æœ‰ç±»åˆ« URLs è¿™æ­£æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ï¼

è®©æˆ‘ä»¬è®°ä½è¿™ä¸€ç‚¹ï¼Œå¹¶æ·±å…¥æŒ–æ˜ï¼Œæ‰¾åˆ°å…¶ä»–æ½œåœ¨çš„ CSS é€‰æ‹©å™¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„èœ˜è››ã€‚æ£€æŸ¥ HTML ä»¥æŸ¥æ‰¾å›¾ä¹¦é¡µé¢ URL:

![](../Images/2f6823e28334feba4ced0fd517d79484.png)

å•ä¸ªå›¾ä¹¦é¡µé¢çš„ URL ä½äºå¸¦æœ‰ CSS ç±»`product pod`çš„`article` HTML å…ƒç´ ä¸‹ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ª CSS è§„åˆ™ï¼Œé€šè¿‡ scraper æ‰¾åˆ°å›¾ä¹¦é¡µé¢çš„ URLã€‚

æœ€åï¼Œæ£€æŸ¥ç½‘ç«™ï¼Œæ‰¾åˆ°å›¾ä¹¦é¡µé¢ä¸Šçš„å•ä¸ªæ•°æ®å­—æ®µ:
![](../Images/47edcb45efeaff498e398dc63f820050.png)

è¿™ä¸€æ¬¡ç¨å¾®æœ‰ç‚¹æ£˜æ‰‹ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨é¡µé¢ä¸Šå¯»æ‰¾å¤šä¸ªæ•°æ®å­—æ®µï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¤šä¸ª CSS é€‰æ‹©å™¨æ¥æ‰¾åˆ°é¡µé¢ä¸Šçš„æ¯ä¸ªå­—æ®µã€‚æ­£å¦‚æ‚¨åœ¨ä¸Šé¢çš„æˆªå›¾ä¸­çœ‹åˆ°çš„ï¼Œä¸€äº›æ•°æ®å­—æ®µ(å¦‚ UPC å’Œ price)å¯ä»¥åœ¨ HTML è¡¨æ ¼ä¸­æ‰¾åˆ°ï¼Œä½†å…¶ä»–å­—æ®µ(å¦‚ title)åœ¨é¡µé¢é¡¶éƒ¨çš„å¦ä¸€ç§ HTML å…ƒç´ ä¸­ã€‚

åœ¨æ£€æŸ¥å¹¶æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„æ‰€æœ‰æ•°æ®å­—æ®µå’Œ URL å®šä½å™¨ä¹‹åï¼Œæ‚¨å¯ä»¥å®ç°èœ˜è››:

```
from scrapy.spiders import CrawlSpider, Rule
from scrapy.linkextractors import LinkExtractor
from bookscraper.items import BookItem

class BookScraper(CrawlSpider):
    name = "bookscraper"
    start_urls = ["http://books.toscrape.com/"]

    rules = (
        Rule(LinkExtractor(restrict_css=".nav-list > li > ul > li > a"), follow=True),
        Rule(LinkExtractor(restrict_css=".product_pod > h3 > a"), callback="parse_book")
    )

    def parse_book(self, response):
        book_item = BookItem()

        book_item["image_url"] = response.urljoin(response.css(".item.active > img::attr(src)").get())
        book_item["title"] = response.css(".col-sm-6.product_main > h1::text").get()
        book_item["price"] = response.css(".price_color::text").get()
        book_item["upc"] = response.css(".table.table-striped > tr:nth-child(1) > td::text").get()
        book_item["url"] = response.url
        return book_item
```

è®©æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™æ®µä»£ç ä¸­å‘ç”Ÿäº†ä»€ä¹ˆ:

1.  åˆºå„¿å¤´ä¼šæ‰“å¼€ç½‘ç«™[http://books.toscrape.com/](http://books.toscrape.com/)ã€‚
2.  å®ƒå°†å¼€å§‹éå†ç”±`.nav-list > li > ul > li > a` CSS é€‰æ‹©å™¨å®šä¹‰çš„ç±»åˆ«é¡µé¢ã€‚
3.  å®ƒå°†ä½¿ç”¨è¿™ä¸ª CSS é€‰æ‹©å™¨:`.product_pod > h3 > a`å¼€å§‹éå†æ‰€æœ‰ç±»åˆ«é¡µé¢ä¸Šçš„æ‰€æœ‰å›¾ä¹¦é¡µé¢ã€‚
4.  æœ€åï¼Œä¸€æ—¦æ‰“å¼€ä¸€æœ¬ä¹¦çš„é¡µé¢ï¼ŒScrapy ä»é¡µé¢ä¸­æå–å‡º`image_url`ã€`title`ã€`price`ã€`upc`å’Œ`url`æ•°æ®å­—æ®µï¼Œå¹¶è¿”å›`BookItem`å¯¹è±¡ã€‚

### è¿è¡Œèœ˜è››

æœ€åï¼Œæˆ‘ä»¬éœ€è¦æµ‹è¯•æˆ‘ä»¬çš„èœ˜è››å®é™…å·¥ä½œå¹¶æŠ“å–æˆ‘ä»¬éœ€è¦çš„æ‰€æœ‰æ•°æ®ã€‚æ‚¨å¯ä»¥ä½¿ç”¨`scrapy crawl`å‘½ä»¤è¿è¡Œèœ˜è››ï¼Œå¹¶å¼•ç”¨èœ˜è››çš„åç§°(å¦‚èœ˜è››ä»£ç ä¸­æ‰€å®šä¹‰çš„ï¼Œè€Œä¸æ˜¯æ–‡ä»¶çš„åç§°ï¼):

```
scrapy crawl bookscraper
```

è¿è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œä½ ä¼šçœ‹åˆ° Scrapy çš„å®æ—¶è¾“å‡ºï¼Œå› ä¸ºå®ƒæ­£åœ¨æŠ“å–æ•´ä¸ªç½‘ç«™:

```
{'image_url': 'http://books.toscrape.com/media/cache/0f/76/0f76b00ea914ced1822d8ac3480c485f.jpg',
 'price': 'Â£12.61',
 'title': 'The Third Wave: An Entrepreneurâ€™s Vision of the Future',
 'upc': '3bebf34ee9330cbd',
 'url': 'http://books.toscrape.com/catalogue/the-third-wave-an-entrepreneurs-vision-of-the-future_862/index.html'}
2022-05-01 18:46:18 [scrapy.core.scraper] DEBUG: Scraped from <200 http://books.toscrape.com/catalogue/shoe-dog-a-memoir-by-the-creator-of-nike_831/index.html>
{'image_url': 'http://books.toscrape.com/media/cache/fc/21/fc21d144c7289e5b1cb133e01a925126.jpg',
 'price': 'Â£23.99',
 'title': 'Shoe Dog: A Memoir by the Creator of NIKE',
 'upc': '0e0dcc3339602b28',
 'url': 'http://books.toscrape.com/catalogue/shoe-dog-a-memoir-by-the-creator-of-nike_831/index.html'}
2022-05-01 18:46:18 [scrapy.core.scraper] DEBUG: Scraped from <200 http://books.toscrape.com/catalogue/the-10-entrepreneur-live-your-startup-dream-without-quitting-your-day-job_836/index.html>
{'image_url': 'http://books.toscrape.com/media/cache/50/4b/504b1891508614ff9393563f69d66c95.jpg',
 'price': 'Â£27.55',
 'title': 'The 10% Entrepreneur: Live Your Startup Dream Without Quitting Your '
          'Day Job',
 'upc': '56e4f9eab2e8e674',
 'url': 'http://books.toscrape.com/catalogue/the-10-entrepreneur-live-your-startup-dream-without-quitting-your-day-job_836/index.html'}
2022-05-01 18:46:18 [scrapy.core.scraper] DEBUG: Scraped from <200 http://books.toscrape.com/catalogue/far-from-true-promise-falls-trilogy-2_320/index.html>
{'image_url': 'http://books.toscrape.com/media/cache/9c/aa/9caacda3ff43984447ee22712e7e9ca9.jpg',
 'price': 'Â£34.93',
 'title': 'Far From True (Promise Falls Trilogy #2)',
 'upc': 'ad15a9a139919918',
 'url': 'http://books.toscrape.com/catalogue/far-from-true-promise-falls-trilogy-2_320/index.html'}
2022-05-01 18:46:18 [scrapy.core.scraper] DEBUG: Scraped from <200 http://books.toscrape.com/catalogue/the-travelers_285/index.html>
{'image_url': 'http://books.toscrape.com/media/cache/42/a3/42a345bdcb3e13d5922ff79cd1c07d0e.jpg',
 'price': 'Â£15.77',
 'title': 'The Travelers',
 'upc': '2b685187f55c5d31',
 'url': 'http://books.toscrape.com/catalogue/the-travelers_285/index.html'}
2022-05-01 18:46:18 [scrapy.core.scraper] DEBUG: Scraped from <200 http://books.toscrape.com/catalogue/the-bone-hunters-lexy-vaughan-steven-macaulay-2_343/index.html>
{'image_url': 'http://books.toscrape.com/media/cache/8d/1f/8d1f11673fbe46f47f27b9a4c8efbf8a.jpg',
 'price': 'Â£59.71',
 'title': 'The Bone Hunters (Lexy Vaughan & Steven Macaulay #2)',
 'upc': '9c4d061c1e2fe6bf',
 'url': 'http://books.toscrape.com/catalogue/the-bone-hunters-lexy-vaughan-steven-macaulay-2_343/index.html'}
```

### ç»“è®º

æˆ‘å¸Œæœ›è¿™ä¸ªå¿«é€Ÿçš„ Scrapy æ•™ç¨‹å¯ä»¥å¸®åŠ©ä½ å¼€å§‹ Scrapy å’Œç½‘ç»œæŠ“å–ã€‚ç½‘ç»œæŠ“å–æ˜¯ä¸€é¡¹éå¸¸æœ‰è¶£çš„å­¦ä¹ æŠ€èƒ½ï¼Œä½†æ˜¯èƒ½å¤Ÿä»ç½‘ä¸Šä¸‹è½½å¤§é‡æ•°æ®æ¥æ„å»ºæœ‰è¶£çš„ä¸œè¥¿ä¹Ÿæ˜¯éå¸¸æœ‰ä»·å€¼çš„ã€‚Scrapy æœ‰ä¸€ä¸ªå¾ˆæ£’çš„[ç¤¾åŒº](https://scrapy.org/community/)ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç¡®å®šï¼Œæ— è®ºä½•æ—¶ä½ åœ¨ scrapy ä¸­é‡åˆ°å›°éš¾ï¼Œä½ éƒ½å¯ä»¥åœ¨é‚£é‡Œæ‰¾åˆ°é—®é¢˜çš„ç­”æ¡ˆï¼Œæˆ–è€…åœ¨ [Stack Overflow](https://stackoverflow.com/search?q=scrapy) ã€ [Reddit](https://www.reddit.com/search/?q=scrapy) æˆ–å…¶ä»–åœ°æ–¹ã€‚åˆ®çš„å¼€å¿ƒï¼